<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" debug="true">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
    <meta charset="utf-8">

    <title>Serving responsive images in PhotoSwipe</title>

    <meta name="description" content="The complete guide on how to serve responsive images in PhotoSwipe.">
    <meta name="viewport" content="width = device-width, initial-scale = 1.0"> 

    <meta name="author" content="Dmitry Semenov">
    <link rel="canonical" href="http://photoswipe.com/documentation/responsive-images.html">

    <meta property="og:url" content="http://photoswipe.com/documentation/responsive-images.html">
    <meta property="og:title" content="Serving responsive images in PhotoSwipe">
    <meta property="og:description" content="The complete guide on how to serve responsive images in PhotoSwipe.">
    <meta property="og:image" content="http://photoswipe.com/test/horizontal-swipe.jpg">

    <link href="https://plus.google.com/102586375605352607718" rel="publisher" />

  
    <link rel="icon apple-touch-icon" href="../test/apple-touch-icon-144x144.png" sizes="144x144" type="image/png">
    <link href="../site-assets/site.css?v=web-4.1.0-1.0.4" rel="stylesheet" />
    
  

    
    <script src="//use.typekit.net/snf1yod.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>

      <!--[if lt IE 9]>
       <script>
          document.createElement('figure');
       </script>
      <![endif]-->
  </head>

  <body>


    
      
      <div class="section docs"><div class="row row--docs">

      <a class="docs-logo" href="http://photoswipe.com">PhotoSwipe</a>

      <h1>Responsive Images</h1>

      <div class="docs-menu">

	<!-- <a class="docs-logo" href="http://photoswipe.com">PhotoSwipe</a> -->

	<ul id="docs-menu-list">
		<li>
			<a href="getting-started.html">Getting started</a>
		</li>

		<li>
			<a href="options.html">Options</a>
		</li>

		<li>
			<a href="api.html">API</a>
		</li>

		<li>
			<a href="faq.html">FAQ</a>
		</li>



		<li style="margin-top: 15px;">
			<a href="custom-html-in-slides.html">HTML in slides</a>
		</li>	

		<li>
			<a href="responsive-images.html">Responsive images</a>
		</li>

		<li>
			<a href="performance-tips.html">Performance tips</a>
		</li>

		<li>
			<a href="seo.html">SEO</a>
		</li>



		<li style="margin-top: 15px;">
			<a href="https://github.com/dimsemenov/PhotoSwipe" class="external">GitHub</a>
		</li>

		<li>
			<a href="https://photoswipe.uservoice.com/forums/275302-feature-requests-ideas" class="external">Ideas</a>
		</li>

		<li>
			<a href="http://twitter.com/photoswipe" class="external">Twitter</a>
		</li>
	
		<li>
			<a href="http://dimsemenov.com/subscribe.html?i=pswp" class="external">Newsletter</a>
		</li>

		

	</ul>

	<div class="docs-menu__ad">
		Code Computerlove are <a href="http://www.codecomputerlove.com/jobs/">hiring software engineers</a> in the UK.
	</div>
</div>
<script>
(function() {
	// And this, kids, is what lazy JS developers do when they need a menu in Jekyll
	var menuEls = document.getElementById('docs-menu-list').children,
		el,
		currUrl = window.location.href;
	for(var i = 0, l = menuEls.length; i < l; i++) {
		el = menuEls[i].children[0];
		if( currUrl.indexOf( el.href ) > -1 ) {
			el.className += 'docs-menu__item--active';
		}
	}
}());
</script>


      

    


    <p>PhotoSwipe does not support <code>&lt;picture&gt;</code> or <code>srcset</code>, as it requires defined image dimensions and uses lazy-loading. But as images are loaded dynamically, it&#39;s quite easy to switch sources, even in old browsers that don&#39;t support <code>srcset</code>.</p>

<p>Let&#39;s assume that you have just &quot;medium&quot; images and &quot;original&quot; (&quot;large&quot;) images. First of all, you need to store path and size of the image in slide object, for example like so:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>

    <span class="c1">// Slide 1</span>
    <span class="p">{</span>
        <span class="nx">mediumImage</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;path/to/medium-image-1.jpg&#39;</span><span class="p">,</span>
            <span class="nx">w</span><span class="o">:</span><span class="mi">800</span><span class="p">,</span>
            <span class="nx">h</span><span class="o">:</span><span class="mi">600</span>
        <span class="p">},</span>
        <span class="nx">originalImage</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;path/to/large-image-1.jpg&#39;</span><span class="p">,</span>
            <span class="nx">w</span><span class="o">:</span> <span class="mi">1400</span><span class="p">,</span>
            <span class="nx">h</span><span class="o">:</span> <span class="mi">1050</span>
        <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// Slide 2</span>
    <span class="c1">// {</span>
    <span class="c1">//     mediumImage: {</span>
    <span class="c1">//         src: &#39;path/to/medium-image-2.jpg&#39;,</span>
    <span class="c1">//         ...</span>
    <span class="c1">//     </span>
    <span class="c1">// ...</span>

<span class="p">];</span>
</code></pre></div>
<p>Then:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// initialise as usual</span>
<span class="kd">var</span> <span class="nx">gallery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PhotoSwipe</span><span class="p">(</span> <span class="nx">pswpElement</span><span class="p">,</span> <span class="nx">PhotoSwipeUI_Default</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>

<span class="c1">// create variable that will store real size of viewport</span>
<span class="kd">var</span> <span class="nx">realViewportWidth</span><span class="p">,</span>
    <span class="nx">useLargeImages</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">firstResize</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">imageSrcWillChange</span><span class="p">;</span>

<span class="c1">// beforeResize event fires each time size of gallery viewport updates</span>
<span class="nx">gallery</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="s1">&#39;beforeResize&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// gallery.viewportSize.x - width of PhotoSwipe viewport</span>
    <span class="c1">// gallery.viewportSize.y - height of PhotoSwipe viewport</span>
    <span class="c1">// window.devicePixelRatio - ratio between physical pixels and device independent pixels (Number)</span>
    <span class="c1">//                          1 (regular display), 2 (@2x, retina) ...</span>


    <span class="c1">// calculate real pixels when size changes</span>
    <span class="nx">realViewportWidth</span> <span class="o">=</span> <span class="nx">gallery</span><span class="p">.</span><span class="nx">viewportSize</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nb">window</span><span class="p">.</span><span class="nx">devicePixelRatio</span><span class="p">;</span>

    <span class="c1">// Code below is needed if you want image to switch dynamically on window.resize</span>

    <span class="c1">// Find out if current images need to be changed</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">useLargeImages</span> <span class="o">&amp;&amp;</span> <span class="nx">realViewportWidth</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">useLargeImages</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">imageSrcWillChange</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">useLargeImages</span> <span class="o">&amp;&amp;</span> <span class="nx">realViewportWidth</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">useLargeImages</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">imageSrcWillChange</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Invalidate items only when source is changed and when it&#39;s not the first update</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">imageSrcWillChange</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">firstResize</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// invalidateCurrItems sets a flag on slides that are in DOM,</span>
        <span class="c1">// which will force update of content (image) on window.resize.</span>
        <span class="nx">gallery</span><span class="p">.</span><span class="nx">invalidateCurrItems</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">firstResize</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">firstResize</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">imageSrcWillChange</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="p">});</span>


<span class="c1">// gettingData event fires each time PhotoSwipe retrieves image source &amp; size</span>
<span class="nx">gallery</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="s1">&#39;gettingData&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Set image source &amp; size based on real viewport width</span>
    <span class="k">if</span><span class="p">(</span> <span class="nx">useLargeImages</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">originalImage</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">originalImage</span><span class="p">.</span><span class="nx">w</span><span class="p">;</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">h</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">originalImage</span><span class="p">.</span><span class="nx">h</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">mediumImage</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">mediumImage</span><span class="p">.</span><span class="nx">w</span><span class="p">;</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">h</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">mediumImage</span><span class="p">.</span><span class="nx">h</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// It doesn&#39;t really matter what will you do here, </span>
    <span class="c1">// as long as item.src, item.w and item.h have valid values.</span>
    <span class="c1">// </span>
    <span class="c1">// Just avoid http requests in this listener, as it fires quite often</span>

<span class="p">});</span>


<span class="c1">// Note that init() method is called after gettingData event is bound</span>
<span class="nx">gallery</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</code></pre></div>
<ul>
<li>You are not obliged to use structure of slide object that looks exactly like above (with <code>mediumImage</code> and <code>largeImage</code> objects). For example, you may store size of image directly in image filename (<code>/path/to/large-image-600x500.jpg</code>) and then parse size in <code>gettingData</code> event. Only <code>item.src</code>, <code>item.w</code>, and <code>item.h</code> properties are read by PhotoSwipe and only after <code>gettingData</code> event is fired.</li>
<li>The larger image, the less smooth animations will look.</li>
<li>Try to avoid serving images just based on devicePixelRatio or just based on viewport size, always combine both.</li>
<li>Feel free to use <code>srcset</code> on thumbnails that open PhotoSwipe.</li>
</ul>

<p>Know how this guide can be improved? <a href="https://github.com/dimsemenov/PhotoSwipe/blob/master/website/documentation/responsive-images.md">Suggest an edit!</a></p>



    

    <p style="
        margin-top: 100px;
        margin-bottom: 100px;
        text-align: center;
    "><span title="Coded">&lt;/&gt;</span> with <span title="love">&lt;3</span> in <a class="ukraine-flag" href="http://en.wikipedia.org/wiki/Ukraine" title="Ukraine"></a> by <a href="http://twitter.com/dimsemenov">@dimsemenov</a></p>


    </div></div>

    <script>
      // Disable codepens on small screens, sort of.
      if(screen.width && screen.width < 1200 ) {
        var els = document.querySelectorAll('.codepen-embed');

        for (i = 0; i < els.length; ++i) {
          els[i].className += " codepen-embed--disabled";
        }
      } else {
        document.write('<script src="//assets.codepen.io/assets/embed/ei.js"><' + '\/script>');
      }
    </script>
  


    

    




  </body>
</html>